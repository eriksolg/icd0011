Projekti 8. osa

Kasutatavad tehnoloogiad: Spring Mvc, JSR 303, Hsql, Gradle.

Selles osas peaks kasutusele võtma Spring Mvc raamistiku, mis tähendab, et 
Servlet-ite asemele tulevad Sring Mvc kontroller(id).

1. Andmete küsimise url-iks saab api/orders?id=<id> asemel olema api/orders/<id>.

2. Lisandub arve ridade valideerimine. Valideerimise reegild on, et 
   kogus ja hind peavad olema määratud ja need peavad olema suuremad nullist.
   Valideerimine peab olema tehtud kasutades JSR 303 annotatsioone.

3. Koodis ei tohiks enam olla Servlette, Listenere ega otse Jdbc kasutamist.
   Test otsib, et teie koodist ei oleks järgmisi sõnesid:
   
   HttpServlet, @WebListener, @WebServlet.
   
   Seepärast peate testide lokaalselt käivitamisel ka oma projekti lähtekoodi 
   asukoha ette andma.
   
   nt. String pathToProjectSourceCode = "c:/Users/jill/icd0011";

4. Kui see punkt jääb tegemata aga muu osa on korras, saate 5 punkti asemel 3, 
   mis on piisav, et see projekti osa tehtuks lugeda.

   Lisandub osamaksete genereerimise teenus. 
   
   GET päring aadressile /api/orders/<tellimuse id>/installments?start=<alguskuupäev>&end=<lõpukuupäev>
   
   peaks tagastama osamakseteks jagatud tellimuse summa.
   
   Päringu näide:
   
   GET /api/orders/1/installments?start=2020-11-04&end=2021-01-01
   
   Vastuse näide:
   
   HTTP/1.1 200 OK
   Content-Type: application/json
   
   [ 
     {"amount":3,"date":"2020-11-04"},
     {"amount":3,"date":"2020-12-01"},
     {"amount":3,"date":"2021-01-01"}
   ]

   Jagatav summa on tellimuse ridade kogusumma (hind * kogus).
   
   Osamakseteks jagamine toimub järgmiste reeglite alusel:
   
     - osamaksed tulevad kuu 1. päevale;
     - kui periood algab pärast 1. kuupäeva, siis on makse perioodi esimesel päeval;
     - minimaalne ühik on 1 Euro; kui summa ei jagu Euro täpsusega, 
       siis jaotatakse vahe viimaste osamaksete vahel;
     - miinimum osamakse summa on 3 Eurot.

   Nt. kui jagatav summa on 10 ja periood on 2020-11-04 kuni 2021-01-01,
   siis tulevad järgmised osamaksed (kuupäev - summa):

      2020-11-04 - 3 Eurot
      2020-12-01 - 3 Eurot
      2021-01-01 - 4 Eurot (jääk läheb viimasele osamaksele)   

Töötav näidis, mis läbib testid:
  http://ci.itcollege.ee/icd0011/examples/hw08/
  
Projekti lähtekood peab vastama järgmistele stiilireeglitele:
  https://bitbucket.org/mkalmo/hwtests/src/master/pmd/ruleset.xml
  
Projekt peab läbima järgmised testid:
  https://bitbucket.org/mkalmo/hwtests/src/master/src/test/java/tests/Hw08.java
